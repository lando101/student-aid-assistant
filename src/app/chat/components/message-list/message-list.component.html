<div *ngIf="liveMessages?.length ?? 0 > 0" class="relative">
    <div class="w-full scroller flex-col-reverse">
      <div id="messagesContainer" #messagesContainer class="flex flex-col gap-0 pr-5 w-full message-container">
        <div class="w-full text-center text-sm text-gray-500 font-medium mb-7">Created {{liveThread?.creation_date?.toString() ?? '' | prettytime }}</div>
          <div *ngFor="let message of liveMessages, let i = index" [ngClass]="{'items-end': message.role !== 'assistant'}" class="message" >
            @if (message.role === 'user') {
              <div class="w-100" [ngClass]="{'slide-in-blurred-bottom': message.animate}">
                <app-message-bubble  [liveMessage]="message ?? null"></app-message-bubble>
              </div>
            } @else if (message.role === 'assistant' && message.message?.length ?? 0 > 8) {
              <div class="w-100" [ngClass]="{'slide-in-blurred-bottom': message.animate}">
                <app-message-bubble  [liveMessage]="message ?? null"></app-message-bubble>
              </div>
            }

          </div>
      </div>
      <!-- <div [@listAnimation]="initialLoad ? undefined : messages?.length" id="messagesContainer" #messagesContainer class="flex flex-col gap-0 pr-5 w-full message-container">
        <div class="w-full text-center text-sm text-gray-500 mb-7">Created {{thread?.creation_date?.toString() ?? '' | prettytime}}</div>
          <div *ngFor="let message of messages, let i = index" [ngClass]="{'items-end': message.role !== 'assistant'}" class="message" >
            <app-message-bubble [message]="message"></app-message-bubble>
          </div>
      </div> -->
    </div>
    <div class="absolute bottom-20 left-0">
      <div [@fadeInOut] *ngIf="messageLoading()">
        <div class="message">
          <div class="flex gap-1 items-center capitalize font-bold dark:text-neutral-400">
            <ng-icon class="ml-1" [size]="'20px'" name="cssBot"></ng-icon>assistant
          </div>
          <div class="w-24 ml-7">
            <div class="rounded-tl-none bg-gray-300 dark:bg-neutral-900 p-3 rounded-xl">
              <div class="spinner">
                <div class="bounce1"></div>
                <div class="bounce2"></div>
                <div class="bounce3"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>

<ng-template #user>
  <ng-icon class="ml-1" [size]="'20px'" name="cssUser"></ng-icon>
</ng-template>

